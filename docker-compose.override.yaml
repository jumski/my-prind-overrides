## Ustreamer base Service
x-ustreamer-svc: &ustreamer-svc
  image: mkuf/ustreamer:nightly
  restart: unless-stopped
  command:
    - "--host=0.0.0.0"
    - "--port=8080"
    - "--slowdown"
    - "--device=/dev/webcam"
    - "--resolution=1280x960"
    - "--format=MJPEG"
    - "--desired-fps=30"

## Add your personal config here
services:
  klipper:
    devices:
      - /dev/ttyACM0:/dev/ttymxc3

  vscode:
    image: linuxserver/code-server
    container_name: vscode
    environment:
      - PUID=1000
      - PGID=1000
      - TZ=Europe/Warsaw
      - DEFAULT_WORKSPACE=/prind-config/
    volumes:
      - ./vscode-config:/config
      - ./config:/prind-config
    ports:
      - 8443:8443
    restart: unless-stopped
    profiles:
      - fluidd
      - mainsail
      - klipperscreen
      - octoprint

  # webcam:
  #   <<: *ustreamer-svc
  #   container_name: webcam
  #   devices:
  #     - /dev/video0:/dev/webcam
  #   labels:
  #     - "traefik.enable=true"
  #     - "traefik.http.services.webcam.loadbalancer.server.port=8080"
  #     - "traefik.http.routers.webcam.rule=PathPrefix(`/webcam`)"
  #     - "traefik.http.routers.webcam.entrypoints=web"
  #     - "traefik.http.middlewares.webcam.stripprefix.prefixes=/webcam"
  #     - "traefik.http.routers.webcam.middlewares=webcam"